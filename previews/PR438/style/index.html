<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Style Guide · InfrastructureSystems.jl</title><meta name="title" content="Style Guide · InfrastructureSystems.jl"/><meta property="og:title" content="Style Guide · InfrastructureSystems.jl"/><meta property="twitter:title" content="Style Guide · InfrastructureSystems.jl"/><meta name="description" content="Documentation for InfrastructureSystems.jl."/><meta property="og:description" content="Documentation for InfrastructureSystems.jl."/><meta property="twitter:description" content="Documentation for InfrastructureSystems.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="InfrastructureSystems.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">InfrastructureSystems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><span class="tocitem">Developer Guide</span><ul><li><a class="tocitem" href="../dev_guide/components_and_container/">Managing Components</a></li><li><a class="tocitem" href="../dev_guide/auto_generation/">Auto-Generation of Component Structs</a></li><li><a class="tocitem" href="../dev_guide/time_series/">Time Series Data</a></li><li><a class="tocitem" href="../dev_guide/recorder/">Recorder Events</a></li><li><a class="tocitem" href="../dev_guide/tests/">Running Tests</a></li><li><a class="tocitem" href="../dev_guide/logging/">Logging</a></li></ul></li><li class="is-active"><a class="tocitem" href>Style Guide</a><ul class="internal"><li><a class="tocitem" href="#Goals"><span>Goals</span></a></li><li><a class="tocitem" href="#Base"><span>Base</span></a></li><li><a class="tocitem" href="#Code-Organization"><span>Code Organization</span></a></li><li><a class="tocitem" href="#Module"><span>Module</span></a></li><li><a class="tocitem" href="#Comments"><span>Comments</span></a></li><li><a class="tocitem" href="#Constructors"><span>Constructors</span></a></li><li><a class="tocitem" href="#Exceptions"><span>Exceptions</span></a></li><li><a class="tocitem" href="#Asserts"><span>Asserts</span></a></li><li><a class="tocitem" href="#Globals"><span>Globals</span></a></li><li><a class="tocitem" href="#One-line-Conditionals"><span>One-line Conditionals</span></a></li><li><a class="tocitem" href="#Logging"><span>Logging</span></a></li><li><a class="tocitem" href="#Unit-Tests"><span>Unit Tests</span></a></li><li><a class="tocitem" href="#Whitespace"><span>Whitespace</span></a></li></ul></li><li><span class="tocitem">Documentation Best Practices</span><ul><li><a class="tocitem" href="../docs_best_practices/explanation/">Explanation</a></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">How to...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../docs_best_practices/how-to/requirements_checklist/">Complete Basic Requirements Checklist</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/general_formatting/">Clean Up General Formatting</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/write_a_tutorial/">Write a Tutorial</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/write_a_how-to/">Write a How-To Guide</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/write_docstrings_org_api/">Organize APIs and Write Docstrings</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/troubleshoot/">Troubleshoot Common Errors</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/compile/">Compile and View Documentation Locally</a></li><li><a class="tocitem" href="../docs_best_practices/how-to/view_github/">View Draft Documentation on Github</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../docs_best_practices/reference/useful_links/">Useful Links</a></li></ul></li></ul></li><li><a class="tocitem" href="../InfrastructureSystems/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Style Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Style Guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/InfrastructureSystems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/InfrastructureSystems.jl/blob/main/docs/src/style.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="style_guide"><a class="docs-heading-anchor" href="#style_guide">Julia Coding Style Guide for Sienna</a><a id="style_guide-1"></a><a class="docs-heading-anchor-permalink" href="#style_guide" title="Permalink"></a></h1><h2 id="Goals"><a class="docs-heading-anchor" href="#Goals">Goals</a><a id="Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Goals" title="Permalink"></a></h2><ul><li>Define a straightforward set of rules that lead to consistent, readable code.</li><li>Developers focus on producing high quality code, not how to format it.</li></ul><h2 id="Base"><a class="docs-heading-anchor" href="#Base">Base</a><a id="Base-1"></a><a class="docs-heading-anchor-permalink" href="#Base" title="Permalink"></a></h2><ul><li><p>Follow the official <a href="https://docs.julialang.org/en/v1/manual/style-guide/index.html">Julia style guide</a> except for deviations noted here.</p></li><li><p>Follow <a href="https://github.com/JuliaLang/julia/blob/main/CONTRIBUTING.md#general-formatting-guidelines-for-julia-code-contributions">Julia contribution guidelines</a>, notably its line length limit.</p></li><li><p>Follow <a href="https://docs.julialang.org/en/v1/manual/documentation/index.html">Julia guidelines for docstrings</a>.</p></li><li><p>Follow <a href="http://www.juliaopt.org/JuMP.jl/dev/style">JuMP coding standards</a>, including its deviations from the Julia style guide.  In particular, note its policies on</p><ul><li><a href="http://www.juliaopt.org/JuMP.jl/dev/style/#Whitespace-1">whitespace</a></li><li><a href="http://www.juliaopt.org/JuMP.jl/dev/style/#Return-statements-1">return statements</a></li><li><a href="http://www.juliaopt.org/JuMP.jl/dev/style/#Use-of-underscores-within-names-1">variable names</a>.</li></ul></li><li><p>Read <a href="https://www.python.org/dev/peps/pep-0020">The Zen of Python</a>.</p></li><li><p>Consider using a plugin that configures your text editor to use <a href="https://editorconfig.org/">EditorConfig</a> settings.</p></li></ul><h2 id="Code-Organization"><a class="docs-heading-anchor" href="#Code-Organization">Code Organization</a><a id="Code-Organization-1"></a><a class="docs-heading-anchor-permalink" href="#Code-Organization" title="Permalink"></a></h2><ul><li>Import standard modules, then 3rd-party modules, then yours. Include a blank line between each group.</li></ul><h2 id="Module"><a class="docs-heading-anchor" href="#Module">Module</a><a id="Module-1"></a><a class="docs-heading-anchor-permalink" href="#Module" title="Permalink"></a></h2><ul><li>When writing a module locate all the exports in the main module file.</li><li>Please include a copy of <a href="https://github.com/NREL-Sienna/InfrastructureSystems.jl/blob/main/.gitignore">this .gitignore file</a></li></ul><h2 id="Comments"><a class="docs-heading-anchor" href="#Comments">Comments</a><a id="Comments-1"></a><a class="docs-heading-anchor-permalink" href="#Comments" title="Permalink"></a></h2><ul><li><p>Use comments to describe non-obvious or non-trivial aspects of code. Describe why something was done but not how.  The &quot;how&quot; should be apparent from the code itself.</p></li><li><p>Use complete sentences and proper grammar.</p></li><li><p>Include a space in between the &quot;#&quot; and the first word of the comment.</p></li><li><p>Use these tags in comments to describe known work:</p><ul><li>TODO:  tasks that need to be done</li><li>FIXME:  code that needs refactoring</li><li>BUG:  known bug that exists. Should include a bug ID and tracking system.</li><li>PERF:  known performance limitation that needs improvement</li></ul></li></ul><h2 id="Constructors"><a class="docs-heading-anchor" href="#Constructors">Constructors</a><a id="Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors" title="Permalink"></a></h2><ul><li>Per guidance from Julia documentation, use inner constructors to enforce restrictions on parameters or to allow construction of self-referential objects. Use outer constructors to provide default values or to perform customization.</li><li>Document the reason why the outer constructor is different.</li><li>Note that the compiler will provide a default constructor with all struct members if no inner constructor is defined.</li><li>When creating a constructor use <code>function Foo()</code> instead of <code>Foo() = ...</code> One exception is the case where one file has all single-line functions.</li></ul><h2 id="Exceptions"><a class="docs-heading-anchor" href="#Exceptions">Exceptions</a><a id="Exceptions-1"></a><a class="docs-heading-anchor-permalink" href="#Exceptions" title="Permalink"></a></h2><ul><li>Use exceptions for unexpected errors and not for normal error handling.</li><li>Detection of an unsupported data format from a user should likely throw an exception and terminate the application.</li><li>Do not use try/catch to handle retrieving a potentially-missing key from a dictionary.</li></ul><h2 id="Asserts"><a class="docs-heading-anchor" href="#Asserts">Asserts</a><a id="Asserts-1"></a><a class="docs-heading-anchor-permalink" href="#Asserts" title="Permalink"></a></h2><ul><li>Use <code>@assert</code> statements to guard against programming errors. Do not use them after detecting bad user input. An assert tripping should indicate that there is a bug in the code. Note that they may be compiled out in optimized builds in the future.</li><li>Consider using <code>InfrastructureSystems.@assert_op</code> instead of the standard <code>@assert</code> because it will automatically print the value of the expression. Unlike the standard <code>@assert</code> the Julia compiler will never exclude <code>@assert_op</code> in optimized builds.</li></ul><pre><code class="language-julia hljs">julia&gt; a = 3; b = 4;
julia&gt; @assert_op a == b
ERROR: AssertionError: 3 == 4</code></pre><h2 id="Globals"><a class="docs-heading-anchor" href="#Globals">Globals</a><a id="Globals-1"></a><a class="docs-heading-anchor-permalink" href="#Globals" title="Permalink"></a></h2><ul><li>Global constants should use UPPER_CASE and be declared const.</li><li>If global variables are needed, prefix them with <code>g_</code>.</li><li>Don&#39;t use magic numbers. Instead, define const globals or Enums (Julia @enum).</li></ul><h2 id="One-line-Conditionals"><a class="docs-heading-anchor" href="#One-line-Conditionals">One-line Conditionals</a><a id="One-line-Conditionals-1"></a><a class="docs-heading-anchor-permalink" href="#One-line-Conditionals" title="Permalink"></a></h2><p>Julia code base uses this idiom frequently:  <code>&lt;cond&gt; &amp;&amp; &lt;statement&gt;</code> <a href="https://docs.julialang.org/en/v1.0/manual/control-flow/#Short-Circuit-Evaluation-1">Example</a>:</p><pre><code class="language-julia hljs">    function fact(n::Int)
       n &gt;= 0 || error(&quot;n must be non-negative&quot;)
       n == 0 &amp;&amp; return 1
       n * fact(n-1)
    end</code></pre><p>This is acceptable for simple code as in this example. However, in general, prefer to write out an entire if statement.</p><p>Ternary operators provide a way to write clean, concise code.  Use good judgement.</p><p>Good:</p><pre><code class="language-julia hljs">    y = x &gt; 0 ? x : -x</code></pre><p>There are many examples in our codebase that use the form <code>&lt;cond&gt; ? &lt;statement&gt; : &lt;statement&gt;</code>. These can be expressed much more clearly in an if/else statement.</p><h2 id="Logging"><a class="docs-heading-anchor" href="#Logging">Logging</a><a id="Logging-1"></a><a class="docs-heading-anchor-permalink" href="#Logging" title="Permalink"></a></h2><p>When adding a debug log statement consider whether it is appropriate to append <code>_group = &lt;some-name&gt;</code>. The packages use this Julia feature to suppress debug logging of entire groups at once.  InfrastructureSystems defines <code>LOG_GROUPS</code> with commonly-used group names.</p><p>If you are developing a feature with functionality in a single file then you can let Julia use the default name (the base name of the file). However, if the feature spans files then you should use an existing group or add a new one. Group names should be of type <code>Symbol</code> and follow the <code>PascalCase</code> naming convention.</p><p>Common group names should be defined in InfrastructureSystems but packages can add their own as needed.</p><h2 id="Unit-Tests"><a class="docs-heading-anchor" href="#Unit-Tests">Unit Tests</a><a id="Unit-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Tests" title="Permalink"></a></h2><p>All code should be tested. The packages in Sienna have a minimum of 70% coverage to be merged into main. This functionality is provided using Codecov</p><h2 id="Whitespace"><a class="docs-heading-anchor" href="#Whitespace">Whitespace</a><a id="Whitespace-1"></a><a class="docs-heading-anchor-permalink" href="#Whitespace" title="Permalink"></a></h2><ul><li>If many function arguments cause the line length to be exceeded, put one argument per line. In some cases it may make sense to pair some variables on the same line.</li></ul><pre><code class="language-julia hljs">    function foo(
                 var1::String,
                 var2::String,
                 var3::String,
                 var4::String,
                 var5::String,
                 var6::String,
                 )</code></pre><ul><li>Do not surround equal signs with spaces when passing keyword args to a function or defining default values in function declarations.</li><li>Do not right-align equal signs when assigning groups of variables. It causes unnecessary changes whenever someone adds a new variable with a longer name.</li></ul><p>Bad:</p><pre><code class="language-julia hljs">    x   = 1
    foo = 2</code></pre><p>Good:</p><pre><code class="language-julia hljs">    x = 1
    foo = 2</code></pre><ul><li>Define abstract types on one line. Given the lack of IDE support for Julia, this makes it easier to find type definitions.</li></ul><p>Bad:</p><pre><code class="language-julia hljs">    abstract type
        Foo
    end</code></pre><p>Good:</p><pre><code class="language-julia hljs">    abstract type Foo end</code></pre><p>All Sienna packages perform tests using <a href="https://github.com/domluna/JuliaFormatter.jl">JuliaFormatter</a> if you are unsure of your format, you can run <code>julia  -e &#39;using JuliaFormatter; include(&quot;.github/workflows/formatter_code.jl&quot;)&#39;</code> at the root of the package. Make sure to have the latest version of JuliaFormatter in your main environment</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dev_guide/logging/">« Logging</a><a class="docs-footer-nextpage" href="../docs_best_practices/explanation/">Explanation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 11 February 2025 20:25">Tuesday 11 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
